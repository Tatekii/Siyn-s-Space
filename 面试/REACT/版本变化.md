## **âš™ï¸ React 18 çš„ä¸»è¦ç‰¹æ€§ï¼ˆ2022 å¹´ 3 æœˆå‘å¸ƒï¼‰**

### **å¹¶å‘æ¸²æŸ“ï¼ˆConcurrent Renderingï¼‰**
    
å¼•å…¥äº†å¹¶å‘æ¸²æŸ“æœºåˆ¶ï¼Œä½¿ React èƒ½å¤Ÿä¸­æ–­ã€æš‚åœå’Œæ¢å¤æ¸²æŸ“è¿‡ç¨‹ï¼Œä»è€Œæé«˜åº”ç”¨çš„å“åº”æ€§å’Œæ€§èƒ½ã€‚
    
### **è‡ªåŠ¨æ‰¹å¤„ç†ï¼ˆAutomatic Batchingï¼‰**
    
React 18 å®ç°äº†è‡ªåŠ¨æ‰¹å¤„ç†ï¼Œå³ä½¿åœ¨ setTimeoutã€Promise æˆ–åŸç”Ÿäº‹ä»¶å¤„ç†å™¨ä¸­ï¼Œå¤šä¸ªçŠ¶æ€æ›´æ–°ä¹Ÿä¼šè¢«è‡ªåŠ¨åˆå¹¶ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚
    
### **æ”¹è¿›çš„ Suspense å’Œæµå¼æœåŠ¡å™¨æ¸²æŸ“**
    
æ”¯æŒåœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨ Suspenseï¼Œå®ç°æµå¼ HTML æ¸²æŸ“ï¼Œæå‡é¦–å±åŠ è½½é€Ÿåº¦ã€‚
    
### **æ–°çš„ Hooks**
    
####  useId
ç”Ÿæˆåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¸€è‡´çš„å”¯ä¸€ IDã€‚
        
#### useTransition
ç®¡ç†è¿‡æ¸¡çŠ¶æ€ã€‚
        
#### useDeferredValue
å»¶è¿Ÿæ›´æ–°ä»¥æé«˜æ€§èƒ½ã€‚

#### useSyncExternalStore
é›†æˆå¤–éƒ¨storeä»¥æ”¯æŒå¹¶å‘æ¸²æŸ“ã€‚ï¼ˆby snapshot compare and force re-renderï¼‰

#### useInsertionEffect
åœ¨ DOM æ’å…¥(layout effect)å‰æ‰§è¡Œå‰¯ä½œç”¨ï¼Œé€‚ç”¨äºæ ·å¼æ³¨å…¥ç­‰åœºæ™¯ã€‚

### æ–°çš„API
#### startTransition
ç”¨äºæ ‡è®°éç´§æ€¥çš„ UI æ›´æ–°
```tsx
import { startTransition } from 'react';  
// Urgent: Show what was typed  
setInputValue(input);  

// Mark any state updates inside as transitions  
startTransition(() => {  
	// Transition: Show the results  
	setSearchQuery(input);  
});
```


---

## **ğŸš€ React 19 çš„æ–°å¢åŠŸèƒ½ï¼ˆ2024 å¹´ 12 æœˆå‘å¸ƒï¼‰**

### **Actionsï¼šç®€åŒ–å¼‚æ­¥æ“ä½œ**
    
å¼•å…¥äº† Actions æ¦‚å¿µï¼Œå…è®¸ä½¿ç”¨å¼‚æ­¥å‡½æ•°å¤„ç†è¡¨å•æäº¤ã€çŠ¶æ€æ›´æ–°ç­‰æ“ä½œï¼Œè‡ªåŠ¨ç®¡ç†åŠ è½½çŠ¶æ€ã€é”™è¯¯å¤„ç†å’Œä¹è§‚æ›´æ–°ï¼Œå‡å°‘æ ·æ¿ä»£ç ã€‚
    
### **æ–°çš„ Hooks**
    
#### useActionState
è¿½è¸ª Action çš„çŠ¶æ€ï¼ˆå¦‚ pendingã€errorï¼‰ã€‚
        
#### useFormStatus
ä¸è·ç¦»æœ€è¿‘çš„`<form>`è¡¨å•é€šä¿¡ã€‚
```tsx
import {useFormStatus} from 'react-dom';

function DesignButton() {
	const {pending} = useFormStatus();  
	return <button type="submit" disabled={pending} />
}
```
#### useOptimistic
å®ç°ä¹è§‚ UI æ›´æ–°ï¼Œåœ¨æœåŠ¡å™¨å“åº”æœŸé—´å…ˆæ›´æ–° UIã€‚Â 
```tsx
function ChangeName({currentName, onUpdateName}) {  

const [optimisticName, setOptimisticName] = useOptimistic(currentName); // çœŸæ­£çš„çŠ¶æ€ä½œä¸ºå‚æ•°

const submitAction = async formData => {  
	const newName = formData.get("name");  
	// è®¾ç½®ä¹è§‚çŠ¶æ€
	setOptimisticName(newName);  
	const updatedName = await updateName(newName);  
	onUpdateName(updatedName);  
};  

return (  

	<form action={submitAction}>  
	
		<p>Your name is: {optimisticName}</p>  
		
		<p>  
			<label>Change Name:</label>  
			<input  
				type="text"  
				name="name"  
				disabled={currentName !== optimisticName}  
			/>  
		</p>  
	</form>  
);  
}
```

### **æ–°çš„ API**
#### use
æ¥å—ä¸€ä¸ªPromiseï¼Œåœ¨resolveä¹‹å‰å°†ç»„ä»¶suspendã€‚


### **Server Componentsï¼ˆæœåŠ¡å™¨ç»„ä»¶ï¼‰**
    
å¼•å…¥äº† Server Componentsï¼Œå…è®¸åœ¨æœåŠ¡å™¨ä¸Šæ¸²æŸ“ç»„ä»¶ï¼Œå‡å°‘å®¢æˆ·ç«¯ JavaScript è´Ÿè½½ï¼Œæé«˜åˆå§‹åŠ è½½æ€§èƒ½ã€‚
    
**æ–°çš„æŒ‡ä»¤ï¼š"use client" å’Œ "use server"**
    
é€šè¿‡åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ  "use client" æˆ– "use server" æŒ‡ä»¤ï¼Œæ˜ç¡®ç»„ä»¶çš„è¿è¡Œç¯å¢ƒï¼Œæœ‰åŠ©äºåŒºåˆ†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç»„ä»¶ã€‚
    
### **æ”¹è¿›çš„ Context API**
    
ä¼˜åŒ–äº† Context çš„æ€§èƒ½ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Œå¹¶å¼•å…¥äº†æ›´ç›´è§‚çš„ä½¿ç”¨æ¨¡å¼ã€‚
    
### **å¢å¼ºçš„ Hydrationï¼ˆæ³¨æ°´ï¼‰è¿‡ç¨‹**
    
æ”¹è¿›äº†æœåŠ¡å™¨æ¸²æŸ“ååœ¨å®¢æˆ·ç«¯çš„ Hydration è¿‡ç¨‹ï¼Œæé«˜äº†é€Ÿåº¦å’Œæ•ˆç‡ï¼Œå‡å°‘äº†äº¤äº’å…ƒç´ å˜å¾—å¯ç”¨çš„ç­‰å¾…æ—¶é—´ã€‚
    
### æ”¯æŒWeb Components
    
React 19 æ”¯æŒä½¿ç”¨ Web Componentsï¼Œè‡ªå®šä¹‰å…ƒç´ å¯ä»¥æ— ç¼é›†æˆåˆ° React åº”ç”¨ä¸­ï¼Œå¢å¼ºäº†ç»„ä»¶çš„å¯å¤ç”¨æ€§å’Œè·¨æ¡†æ¶å…¼å®¹æ€§ã€‚
    
### **å…¶ä»–æ”¹è¿›**

- æ”¯æŒå°†`ref` ä½œä¸ºå¸¸è§„å±æ€§ä¼ é€’
- `ref`æ”¯æŒcleanup
- `<Context>`ä¸ç”¨.Provideräº†
- æ”¹è¿›äº†å¯¹æ–‡æ¡£å…ƒæ•°æ®ã€æ ·å¼è¡¨ã€å¼‚æ­¥è„šæœ¬å’Œèµ„æºé¢„åŠ è½½çš„æ”¯æŒã€‚    
- å¢å¼ºäº†é”™è¯¯è¾¹ç•Œï¼Œè‡ªåŠ¨å°è¯•ä»ç»„ä»¶é”™è¯¯ä¸­æ¢å¤ï¼Œé˜²æ­¢åº”ç”¨å´©æºƒã€‚