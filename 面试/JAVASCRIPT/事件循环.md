
## 页面进程
浏览器每一个标签页一个进程，每个进程中除了执行js的线程还有负责渲染，网络请求等线程。

## JS 的单线程
JavaScript 的单线程，与它的用途有关。作为浏览器脚本语言，JavaScript 的主要用途是与用户互动，以及操作 DOM。这决定了它只能是单线程,保证执行任务的有序并避开复杂的同步问题。
 
## EventLoop
[https://html.spec.whatwg.org/multipage/webappapis.html#event-loops](https://html.spec.whatwg.org/multipage/webappapis.html#event-loops)
![[Pasted image 20250218095926.png]]
浏览器是多线程的，js是单线程的，JavaScript 有一个基于**事件循环**的运行时模型，事件循环负责执行代码、收集和处理事件以及执行队列中的子任务。通过讲监视调用栈`Call Queue`和任务队列`Task Queue`，在调用栈为空时从任务队列读取任务进入执行栈执行。

### 调用栈
栈结构，后进先出，存储程序执行过程 中创建的所有执行上下文`Excution Context`。在代码执行的时候，通过将不同函数的执行上下文压入执行栈，上下文执行结束后按顺序弹出中来保证代码的有序执行。

### 任务队列
任务队列`Task Queue`⚠️并不是队列结构，而是集合set，存储待处理的事件，这些事件可能包括用户交互（点击滚动），网络请求，定时器等。事件循环模型从任务队列中抓去第一个可执行的任务而不是队头。
- 同种任务会遵循**FIFO (First In, First Out)**。
- 不同种任务：宏/微任务，UI交互事件，定时器，I/O回调会有不同的执行优先级。
### 微任务队列
事件循环模型拥有一个微任务**队列**，