## XSS跨域脚本攻击`Cross-site scripting`
浏览器渲染过程中执行了预期外的恶意代码，XSS利用web开发过程中的漏洞执行攻击。

### 存储型XSS
input, textarea等）中写入恶意脚本上传到服务器，其他人下载带有该脚本的html页面至浏览器时脚本运行

  

- 反射型XSS

  

将恶意代码加入`URL`中提交给服务器，服务器返回内容就带上了恶意代码，浏览器下载页面则执行了恶意代码，服务器不存储恶意代码

  

- DOM XSS

  

- JavaScript 的 `eval()`、`setTimeout()`、`setInterval()` 等函数

- `<a>`标签的`href`属性

- DOM中的内联事件监视器,`location`,`onclick`,`onerror`,`onload`等

- 都可以将字符串作为代码执行

  

### 防范XSS

  

- 使用内容安全策略CSP`Content Security Policy`,限制该页面可以获取的资源和来源

  

- 对所有用户提交内容进行可靠的输入验证，包括URL、查询关键字、HTTP头、REFER、POST数据等

- 任何内容输出到页面之前都必须加以`en-code`编码，避免生成意外的html标签；

- `cookie` 内不存储敏感信息如账号密码等，并设施`http only`

  

## CSRF跨域请求伪造

`Cross-site request forgery`

>利用用户登录态

  

### 防御CSRF

  

- 验证`http`请求的来源`origin`和`referrer`

- 设置`cookie`的`SameSite`属性，使`cookie`只可被第一方使用

- 设置客户端请求携带`session token`，并在服务器端验证`token`

- 验证码

  
  

## 其他

  

#### SQL注入

  

1. 黑客提交畸形数据改变语义提交sql查询得到非法数据

2. 防御

  

3. 过滤sql保留字

4. 减少抛出不必要的数据库错误信息

5. 禁止动态拼接sql语句访问数据库

  

#### 点击劫持

  

6. 点击透明iframe

7. 监听鼠标移动位置

8. H5拖拽

9. 防御：

10. 服务端添加 `X-Frame-Options` 响应头

11. js判断顶层视口是否同源

12. 敏感操作复杂操作（验证码，二次确认

  

#### `window.opener`

  

1. 修改`window.opener.location`可以改写来源站点的地址

2. 防御：

3. 设置a标签的rel属性`rel=noopener`,禁止新页面传递源页面地址

4. 外部链接改为经由服务器跳转

5. 使用window.open打开外链